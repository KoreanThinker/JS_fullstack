generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Partner {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  email     String   @unique
  password  String
  name      String
  profit    Int      @default(0)
  items     Item[]
  orders    Order[]
}

model Order {
  id        Int       @default(autoincrement()) @id
  createdAt DateTime  @default(now())
  price     Int
  itemState ItemState @default(receiving)
  item      Item?     @relation(fields: [itemId], references: [id])
  buyer     User?     @relation(fields: [buyerId], references: [id])
  partner   Partner?  @relation(fields: [partnerId], references: [id])
  buyerId   Int?
  itemId    Int?
  partnerId Int?
}

enum ItemState {
  receiving
  receiptCompleted
  deliveryProgress
  deliveryCompleted
  canceled
}

model Item {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  published Boolean  @default(true)
  partner   Partner? @relation(fields: [partnerId], references: [id])
  buyers    User[]
  partnerId Int?
  order     Order[]
  price     Int
  name      Int      @unique
  images    Image[]
}

model Image {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  src       String
  item      Item?    @relation(fields: [itemId], references: [id])
  itemId    Int?
}

model User {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  email     String   @unique
  sns       SnsLogin
  //token???
  password  String
  name      String
  orders    Order[]
  boughts   Item[]
}

enum SnsLogin {
  em
  ka
  fa
  go
  na
}
